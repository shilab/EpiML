<!DOCTYPE html>
{% extends "base.html" %}
{% block title %}
    <title>Web Server | Shilab web server</title>
{% endblock %}
{% block scripts %}
    {{ super() }}
    <script>
        function ShowHideCV(chkCV) {
            var fold_number = document.getElementById("fold_number");
            fold_number.style.visibility = chkCV.checked ? "visible" : "hidden";
        }
    </script>
    <script type="text/javascript">
        $(document).ready(function () {
            var arr = new Array();
            $("select[multiple]").change(function () {
                $(this).find("option:selected")
                if ($(this).find("option:selected").length > 3) {
                    $(this).find("option").removeAttr("selected");
                    $(this).val(arr);
                }
                else {
                    arr = new Array();
                    $(this).find("option:selected").each(function (index, item) {
                        arr.push($(item).val());
                    });
                }
            });
        });
    </script>
{% endblock %}
{% block content %}
    <div>
        <h2>Web Server</h2>
        webserver.html
        <hr>
        <!-- Tab links-->
        <ul class="nav nav-tabs">
            <li><a href="{{ url_for('webserver_training') }}">Training</a></li>
            <li class="active"><a href="{{ url_for('webserver_testing') }}">Testing</a></li>
        </ul>

        <div class="tab-content">
            <div id="testing" class="tab-pane fade active in" style="padding-top: 20px">
                <p>Upload unknown data and choose a model to predict your samples. </p>
                <hr>
                <p class="col-sm-offset-2" style="color: red;"><strong>All fields are required.</strong></p>
                <form class="form-horizontal" method="post" enctype="multipart/form-data">
                    <div class="form-group row">
                        <label class="control-label col-sm-2" for="jobname">Job Name:</label>
                        <div class="col-sm-4">
                            <input name="jobname" class="form-control" id="jobname" placeholder="Enter your job name"
                                   required>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="control-label col-sm-2" for="email">Email:</label>
                        <div class="col-sm-4">
                            <input name="email" type="email" class="form-control" id="email"
                                   placeholder="Enter your Email"
                                   required>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="control-label col-sm-2" for="description">Description:</label>
                        <div class="col-sm-10">
                    <textarea style="height: 100px" name="description" class="form-control" id="description"
                              placeholder="Add description for your job, like data, method and parameters."
                              required></textarea>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-sm-2" for="upload">Upload files:</label>
                        <div class=" col-sm-5">
                            <label class="control-label" for="input-x">Choose your unknown data: X</label>
                            <input class="form-control" type="file" id="input-x" name="input-x"
                                   placeholder="choose your unknown data: X" required>
                        </div>
                    </div>
                    <div class="form-group form-inline">
                        <label class="control-label col-sm-2" for="methods">Choose Models:</label>
                        <div class="col-sm-8">
                            <select multiple>
                                {% for model in models %}
                                    <option value=" {{ model.id }}">{{ model.algorithm }} {{ model.performance }} {{ jobnames[loop.index0] }}</option>
                                {% endfor %}
                                <option value="volvo">Volvo</option>
                                <option value="saab">Saab</option>
                                <option value="opel">Opel</option>
                                <option value="audi">Audi</option>
                            </select>
                        <p>* Hold down the Ctrl (windows) / Command (Mac) button to select multiple options. Limit to maximum 3 models</p>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-sm-offset-2 col-sm-10">
                            <button type="submit" class="btn btn-primary">Submit</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

    </div>
{% endblock %}